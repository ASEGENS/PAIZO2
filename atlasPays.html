<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informations sur le Pays</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
</head>
<body>
    <!-- Timeline Section -->
    <section class="timeline-section">
        <div id="timeline"></div>
    </section>

    <!-- Information Section -->
    <section class="info-section container">
        <h1 id="countryName">Nom du Pays</h1>
        <p id="countryDescription">Description du pays...</p>
        <h2>Politique</h2>
        <p id="countryPolitics">Informations politiques...</p>
        <h2>Population</h2>
        <p id="countryPopulation">Données démographiques...</p>
        <h2>Monuments</h2>
        <p id="countryMonuments">Informations sur les monuments...</p>
        <h2>Religions</h2>
        <p id="countryReligions">Détails religieux...</p>
    </section>

    <!-- Modal for Timeline Tooltip -->
    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn btn-primary" id="pageButton">Page de Nom</button>
                    <h5 class="modal-title" id="infoModalLabel">Informations</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="modalContent">
                        <!-- Contenu dynamique -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const countryName = document.getElementById('countryName');
            const countryDescription = document.getElementById('countryDescription');
            const countryPolitics = document.getElementById('countryPolitics');
            const countryPopulation = document.getElementById('countryPopulation');
            const countryMonuments = document.getElementById('countryMonuments');
            const countryReligions = document.getElementById('countryReligions');
            const timelineContainer = document.getElementById('timeline');

            // Fonction pour charger les informations du pays
            function loadCountryInfo(country) {
                // Assurez-vous que le fichier JSON contient les informations nécessaires
                fetch(`${country}.json`)
                    .then(response => response.json())
                    .then(data => {
                        countryName.textContent = data.name;
                        countryDescription.textContent = data.description;
                        countryPolitics.textContent = data.politics;
                        countryPopulation.textContent = data.population;
                        countryMonuments.textContent = data.monuments;
                        countryReligions.textContent = data.religions;
                    })
                    .catch(error => console.error('Erreur lors du chargement des informations du pays:', error));
            }

            // Charger la frise chronologique du pays
            function loadCountryTimeline(country) {
                Papa.parse(`${country}.csv`, {
                    download: true,
                    header: true,
                    complete: function(results) {
                        const data = results.data;
                        timelineContainer.innerHTML = ''; // Clear previous content

                        // Créer les éléments de la frise chronologique
                        data.forEach(event => {
                            const eventElement = document.createElement('div');
                            eventElement.className = 'timeline-event';
                            eventElement.dataset.date = event.Date;
                            eventElement.innerHTML = `<strong>${event['Nom de l\'événement']}</strong><br>${event.Zone}<br>${event.Date}`;
                            
                            // Ajouter un événement au survol
                            eventElement.addEventListener('mouseover', () => {
                                const tooltip = document.createElement('div');
                                tooltip.className = 'timeline-tooltip';
                                tooltip.innerHTML = `
                                    <strong>${event['Nom de l\'événement']}</strong><br>
                                    ${event.Date}<br>
                                    ${event.Zone}<br>
                                    ${event.Détail}
                                `;
                                document.body.appendChild(tooltip);
                                tooltip.style.left = `${eventElement.getBoundingClientRect().left}px`;
                                tooltip.style.top = `${eventElement.getBoundingClientRect().top - tooltip.offsetHeight}px`;

                                eventElement.addEventListener('mouseout', () => {
                                    document.body.removeChild(tooltip);
                                });
                            });

                            timelineContainer.appendChild(eventElement);
                        });
                    }
                });
            }

            // Appeler les fonctions pour charger les informations et la frise chronologique
            const country = 'nomDuPays'; // Remplacez par le nom du pays correspondant
            loadCountryInfo(country);
            loadCountryTimeline(country);
        });
    </script>
</body>
</html>
